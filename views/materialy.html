<!-- File: views/materialy.html -->
<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>MateriÃ¡ly â€“ ElektroSprÃ¡va</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <span class="icon">âš¡</span> ElektroSprÃ¡va â€“ MateriÃ¡ly
    <nav><a href="/">DomÅ¯</a></nav>
  </header>

  <main class="container">
    <section class="form-section">
      <form action="/pridat-material" method="POST">
        <label for="nazev">NÃ¡zev materiÃ¡lu</label>
        <input id="nazev" name="nazev" required>

        <label for="cena">Cena za jednotku (KÄ)</label>
        <input id="cena" name="cena" type="number" step="0.01" required>

        <label for="jednotka">Jednotka</label>
        <input id="jednotka" name="jednotka" required>

        <button type="submit">â• PÅ™idat materiÃ¡l</button>
      </form>
    </section>

    <section class="table-section">
      <h2>Seznam materiÃ¡lÅ¯</h2>
      <div id="materialyList">NaÄÃ­tÃ¡mâ€¦</div>
    </section>
  </main>

  <script>
    fetch('/api/materialy')
      .then(res => res.json())
      .then(data => {
        const c = document.getElementById('materialyList');
        c.innerHTML = '';
        const t = document.createElement('table');
        const h = document.createElement('tr');
        ['ID','NÃ¡zev','Cena','Jednotka','Akce']
          .forEach(txt => {
            const th = document.createElement('th');
            th.textContent = txt;
            h.appendChild(th);
          });
        t.appendChild(h);

        data.forEach(m => {
          const tr = document.createElement('tr');
          [m.id, m.nazev, m.cena_za_jednotku, m.jednotka]
            .forEach(v => {
              const td = document.createElement('td');
              td.textContent = v;
              tr.appendChild(td);
            });
          const td = document.createElement('td');
          td.innerHTML = `
            <form action="/smazat-material" method="POST">
              <input type="hidden" name="id" value="${m.id}">
              <button class="btn-delete">ğŸ—‘ï¸</button>
            </form>`;
          tr.appendChild(td);
          t.appendChild(tr);
        });
        c.appendChild(t);
      })
      .catch(() => {
        document.getElementById('materialyList')
                .textContent = 'Chyba pÅ™i naÄÃ­tÃ¡nÃ­.';
      });
  </script>
</body>
</html>
