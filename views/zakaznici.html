<!-- File: views/zakaznici.html -->
<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ZÃ¡kaznÃ­ci â€“ ElektroSprÃ¡va</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <span class="icon">âš¡</span> ElektroSprÃ¡va â€“ ZÃ¡kaznÃ­ci
    <nav><a href="/">DomÅ¯</a></nav>
  </header>

  <main class="container">
    <section class="form-section">
      <form action="/pridat-zakaznika" method="POST">
        <label for="jmeno">JmÃ©no</label>
        <input id="jmeno" name="jmeno" required>

        <label for="email">Email</label>
        <input id="email" name="email" type="email">

        <label for="telefon">Telefon</label>
        <input id="telefon" name="telefon">

        <label for="adresa">Adresa</label>
        <input id="adresa" name="adresa">

        <button type="submit">â• PÅ™idat zÃ¡kaznÃ­ka</button>
      </form>
    </section>

    <section class="table-section">
      <h2>Seznam zÃ¡kaznÃ­kÅ¯</h2>
      <div id="zakazniciList">NaÄÃ­tÃ¡mâ€¦</div>
    </section>
  </main>

  <script>
    fetch('/api/zakaznici')
      .then(r => r.json())
      .then(data => {
        const c = document.getElementById('zakazniciList');
        c.innerHTML = '';
        const t = document.createElement('table');
        const h = document.createElement('tr');
        ['ID','JmÃ©no','Email','Telefon','Adresa','Akce']
          .forEach(txt => {
            const th = document.createElement('th');
            th.textContent = txt;
            h.appendChild(th);
          });
        t.appendChild(h);

        data.forEach(z => {
          const tr = document.createElement('tr');
          [z.id, z.jmeno, z.email, z.telefon, z.adresa]
            .forEach(v => {
              const td = document.createElement('td');
              td.textContent = v;
              tr.appendChild(td);
            });
          const td = document.createElement('td');
          td.innerHTML = `
            <form action="/smazat-zakaznika" method="POST">
              <input type="hidden" name="id" value="${z.id}">
              <button class="btn-delete">ğŸ—‘ï¸</button>
            </form>`;
          tr.appendChild(td);
          t.appendChild(tr);
        });
        c.appendChild(t);
      });
  </script>
</body>
</html>
